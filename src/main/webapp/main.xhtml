<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<f:view>

    <title>dot lab</title>

    <!-- styles -->
    <link rel="stylesheet" href="#{request.contextPath}/resources/css/form.css"/>
    <link rel="stylesheet" href="#{request.contextPath}/resources/css/style.css"/>

    <!-- particles.js container -->
    <div id="particles-js"></div>

    <div class="header">
        <div class="horizon">
            <div class="info--student">
                Gasyuk Aleksandr P32131
            </div>
            <div class="info--work">
                <div class="info--work__lesson">
                    Web-programming
                </div>
                <div class="info--work__lab">
                    Lab N2 Variant N1206
                </div>
            </div>
        </div>
        <div id="phone_container" class="horizon">
            <fieldset class="form__group" id="phone_container_form">
                <legend>Share dots to number</legend>
                <div>
                    <input type="text" id="choose_number"/>
                </div>
                <div class="new_error" id="no_dot_selected">
                    No dots selected
                </div>
                <div class="new_error" id="user_not_exist">
                    This user does not exist
                </div>
                <div>
                    <button id="send_dots_button">SEND</button>
                </div>
            </fieldset>
        </div>
    </div>


    <div class="main">
        <div class="form__container">
            <h:form class="main__form">
                <fieldset class="form__group">
                    <legend>Please select your numbers</legend>
                    <div class="group--buttons" id="x_container">
                        <span class="group--text"> X:</span>
                        <h:selectOneRadio id="x_param" value="#{webSocketBean.x}">
                            <f:selectItem itemLabel="-2" itemValue="-2"/>
                            <f:selectItem itemLabel="-1.5" itemValue="-1.5"/>
                            <f:selectItem itemLabel="-1" itemValue="-1"/>
                            <f:selectItem itemLabel="-0.5" itemValue="-0.5"/>
                            <f:selectItem itemLabel="0" itemValue="0"/>
                            <f:selectItem itemLabel="0.5" itemValue="0.5"/>
                            <f:selectItem itemLabel="1" itemValue="1"/>
                            <f:selectItem itemLabel="1.5" itemValue="1.5"/>
                            <f:selectItem itemLabel="2" itemValue="2"/>

                            <f:validateRequired/>
                        </h:selectOneRadio>
                        <!--                        <span class="group&#45;&#45;text"> X:</span>-->
                        <!--                        <input type="radio" id="x1" name="x_param" value="-2"/>-->
                        <!--                        <label for="x1">-2</label>-->

                        <!--                        <input type="radio" id="x2" name="x_param" value="-1.5"/>-->
                        <!--                        <label for="x2">-1.5</label>-->

                        <!--                        <input type="radio" id="x3" name="x_param" value="-1"/>-->
                        <!--                        <label for="x3">-1</label>-->

                        <!--                        <input type="radio" id="x4" name="x_param" value="-0.5"/>-->
                        <!--                        <label for="x4">-0.5</label>-->

                        <!--                        <input type="radio" id="x5" name="x_param" value="0"/>-->
                        <!--                        <label for="x5">0</label>-->

                        <!--                        <input type="radio" id="x6" name="x_param" value="0.5"/>-->
                        <!--                        <label for="x6">0.5</label>-->

                        <!--                        <input type="radio" id="x7" name="x_param" value="1"/>-->
                        <!--                        <label for="x7">1</label>-->

                        <!--                        <input type="radio" id="x8" name="x_param" value="1.5"/>-->
                        <!--                        <label for="x8">1.5</label>-->

                        <!--                        <input type="radio" id="x9" name="x_param" value="2"/>-->
                        <!--                        <label for="x9">2</label>-->
                    </div>
                    <div class="error" id="empty_X">
                        Please select X
                    </div>
                    <div class="group--buttons">
                        <span class="group--text">  Y: </span>
                        <h:inputText id="y_input" maxlength="15" autocomplete="off" value="#{webSocketBean.y}">
                            <f:validateDoubleRange minimum="-5" maximum="3"/>
                            <f:validateRequired/>
                        </h:inputText>
                    </div>
                    <div class="error" id="empty_Y">
                        Y cannot be empty
                    </div>
                    <div class="error" id="not_number_Y">
                        Y must be a number
                    </div>
                    <div class="error" id="Y_is_out_of_range">
                        Y is out of range (-5; 3)
                    </div>
                    <div class="group--buttons" id="r_container">
                        <span class="group--text"> R:</span>
                        <h:selectManyCheckbox id="r_param" value="#{webSocketBean.r}">
                            <f:selectItems value="#{webSocketBean.rOptions}"/>
                        </h:selectManyCheckbox>
                        <!--                        <span class="group&#45;&#45;text"> R:</span>-->
                        <!--                        <input type="checkbox" id="r1" name="r_param" value="1"/>-->
                        <!--                        <label for="r1">1</label>-->

                        <!--                        <input type="checkbox" id="r2" name="r_param" value="1.5"/>-->
                        <!--                        <label for="r2">1.5</label>-->

                        <!--                        <input type="checkbox" id="r3" name="r_param" value="2"/>-->
                        <!--                        <label for="r3">2</label>-->

                        <!--                        <input type="checkbox" id="r4" name="r_param" value="2.5"/>-->
                        <!--                        <label for="r4">2.5</label>-->

                        <!--                        <input type="checkbox" id="r5" name="r_param" value="3"/>-->
                        <!--                        <label for="r5">3</label>-->
                    </div>
                    <div class="error" id="empty_R">
                        Please select R
                    </div>
                    <div class="button--sender">
                        <!--                        <button type="submit" id="submit_button">Submit</button>-->
                        <h:commandButton value="pushToApplicationChannel" id="submit_button"
                                         action="#{webSocketBean.sendMessage()}">
                            <f:ajax execute="@form" render="table"/>
                        </h:commandButton>
                    </div>
                </fieldset>
            </h:form>
        </div>

        <div class="main__container">
            <div class="canvas-container">
                <canvas id="graph"/>
            </div>
        </div>
    </div>

    <div class="table__container">
        <h:dataTable class="table--main" value="#{requests.data}" var="data" id="table">
            <h:column headerClass="thStyle">
                <f:facet name="header">Is in area</f:facet>
                <h:outputText value="#{webSocketBean.inArea}" styleClass="x-result"/>
            </h:column>
            <h:column headerClass="thStyle">
                <f:facet name="header">X value</f:facet>
                <h:outputText value="#{webSocketBean.x}" styleClass="x-result"/>
            </h:column>
            <h:column headerClass="thStyle">
                <f:facet name="header">Y value</f:facet>
                <h:outputText value="#{webSocketBean.y}" styleClass="x-result"/>
            </h:column>
            <h:column headerClass="thStyle">
                <f:facet name="header">R value</f:facet>
                <h:outputText value="#{webSocketBean.r}" styleClass="x-result"/>
            </h:column>
            <h:column headerClass="thStyle">
                <f:facet name="header">Date</f:facet>
                <h:outputText value="#{webSocketBean.date}" styleClass="x-result"/>
            </h:column>
            <h:column headerClass="thStyle">
                <f:facet name="header">Script's time</f:facet>
                <h:outputText value="#{webSocketBean.time}" styleClass="x-result"/>
            </h:column>
            <h:column headerClass="thStyle">
                <f:facet name="header">Creator</f:facet>
                <h:outputText value="#{webSocketBean.creator}" styleClass="x-result"/>
            </h:column>
            <th scope="col" class="choose_col">Select</th>

        </h:dataTable>


        <!--        <table class="table&#45;&#45;main">-->
        <!--            <tbody class="tbody&#45;&#45;main">-->
        <!--            <tr>-->
        <!--                <th scope="col">Is in area?</th>-->
        <!--                <th scope="col">X value</th>-->
        <!--                <th scope="col">Y value</th>-->
        <!--                <th scope="col">R value</th>-->
        <!--                <th scope="col">Date</th>-->
        <!--                <th scope="col">Script's time</th>-->
        <!--                <th scope="col">Creator</th>-->
        <!--                <th scope="col" class="choose_col">Select</th>-->
        <!--            </tr>-->
        <!--            </tbody>-->
        <!--        </table>-->
    </div>

    <!-- hidden input to get data from js -->
    <h:form styleClass="hidden">
        <h:inputText id="hidden-phone-number" value="#{webSocketBean.owner}" styleClass="hidden"/>
    </h:form>


    <!-- websockets -->
    <f:websocket channel="userChannel" user="user" onmessage="onMessage"/>

    <!-- main scripts -->
    <script type="module" src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
    <h:outputScript name="js/script.js"/>

    <!-- particle scripts -->
    <h:outputScript name="js/libs/particles.js"/>
    <h:outputScript name="js/libs/app_particular.js"/>

</f:view>

</html>
